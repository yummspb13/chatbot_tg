# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: –±–æ—Ç —á–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç —á–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –∫–∞–Ω–∞–ª–∞ "–¢–µ—Å—Ç –ö–∏–¥–¥" (Chat ID: -1003442736774), —Ö–æ—Ç—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å 4 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞:

1. ‚úÖ Free4kids: –¥–µ—Ç—Å–∫–∞—è –∞—Ñ–∏—à–∞ –ü–∏—Ç–µ—Ä–∞ (-1001388592188)
2. ‚úÖ –ö—É–¥–∞ –ø–æ–π—Ç–∏ –≤ –ü–∏—Ç–µ—Ä–µ —Å –¥–µ—Ç—å–º–∏ (-1001348648713)
3. ‚úÖ –ú–∞–º–∞—Ö–æ–¥ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ (-1001326982950)
4. ‚úÖ –¢–µ—Å—Ç –ö–∏–¥–¥ (-1003442736774)

## üîé –ü—Ä–∏—á–∏–Ω—ã

### 1. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç `channel_post` —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞

Telegram Bot API –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `channel_post` —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞–Ω–∞–ª–æ–≤, –≥–¥–µ –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. –ï—Å–ª–∏ –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ ("–¢–µ—Å—Ç –ö–∏–¥–¥"), –æ–Ω –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ—Ç –Ω–µ–≥–æ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –≤ Telegram
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –±–æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–Ω–∞–ª–∞
- –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 2. Worker —á–µ—Ä–µ–∑ Client API –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –∫–∞–Ω–∞–ª–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω –∞–∫–∫–∞—É–Ω—Ç

–î–ª—è –∫–∞–Ω–∞–ª–æ–≤, –≥–¥–µ –±–æ—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Worker —á–µ—Ä–µ–∑ Telegram Client API. Worker –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –∫–∞–Ω–∞–ª–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω –∞–∫–∫–∞—É–Ω—Ç (–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `TELEGRAM_SESSION_STRING`).

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
npm run check:channel:subscriptions
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç, –ø–æ–¥–ø–∏—Å–∞–Ω –ª–∏ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ –≤—Å–µ –∫–∞–Ω–∞–ª—ã.

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –≤ Telegram
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–∞ ‚Üí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
4. –î–∞–π—Ç–µ –±–æ—Ç—É –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Bot API
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω Worker –¥–ª—è —ç—Ç–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
- ‚úÖ –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ù—É–∂–Ω—ã –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ –∫–∞–Ω–∞–ª–∞—Ö
- ‚ö†Ô∏è –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫–∞–Ω–∞–ª–æ–≤ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤

### –†–µ—à–µ–Ω–∏–µ 2: –ü–æ–¥–ø–∏—Å–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç Client API –Ω–∞ –≤—Å–µ –∫–∞–Ω–∞–ª—ã

–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–Ω–∞–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–Ω–∞–ª—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤), –Ω—É–∂–Ω–æ:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏:**
   ```bash
   npm run check:channel:subscriptions
   ```

2. **–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª—ã:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∞–∫–∫–∞—É–Ω—Ç (–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `TELEGRAM_SESSION_STRING`)
   - –ù–∞–π–¥–∏—Ç–µ –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ —Å—Å—ã–ª–∫–µ
   - –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª—ã

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Worker:**
   ```bash
   curl -X POST https://chatbot-tg.onrender.com/runner/stop
   curl -X POST https://chatbot-tg.onrender.com/runner/start
   ```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ –≤ –±–∞–∑–µ:**
```bash
npm run check:channels:db
```

## üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–Ω–∞–ª—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```bash
npm run check:channels:db
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ 4 –∫–∞–Ω–∞–ª–∞ —Å `isActive: true`.

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
```bash
npm run check:channel:subscriptions
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç, –ø–æ–¥–ø–∏—Å–∞–Ω –ª–∏ –∞–∫–∫–∞—É–Ω—Ç Client API –Ω–∞ –≤—Å–µ –∫–∞–Ω–∞–ª—ã.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Worker
```bash
npm run check:worker:status
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç, –∑–∞–ø—É—â–µ–Ω –ª–∏ Worker –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

**–õ–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Vercel):**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Vercel Dashboard
- –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å `handleChannelMessage` –∏ `Chat ID`

**–õ–æ–≥–∏ Worker (Render.com):**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render.com Dashboard
- –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å `–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞`

## üìã –ß–µ–∫–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–Ω–∞–ª—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (`npm run check:channels:db`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (`npm run check:channel:subscriptions`)
- [ ] –ï—Å–ª–∏ –±–æ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º - –¥–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã
- [ ] –ï—Å–ª–∏ –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º - –ø–æ–¥–ø–∏—Å–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç Client API –Ω–∞ –≤—Å–µ –∫–∞–Ω–∞–ª—ã
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Worker –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç –¥–æ–ª–∂–µ–Ω —á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≤—Å–µ—Ö 4 –∫–∞–Ω–∞–ª–æ–≤:
- ‚úÖ Free4kids: –¥–µ—Ç—Å–∫–∞—è –∞—Ñ–∏—à–∞ –ü–∏—Ç–µ—Ä–∞
- ‚úÖ –ö—É–¥–∞ –ø–æ–π—Ç–∏ –≤ –ü–∏—Ç–µ—Ä–µ —Å –¥–µ—Ç—å–º–∏
- ‚úÖ –ú–∞–º–∞—Ö–æ–¥ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
- ‚úÖ –¢–µ—Å—Ç –ö–∏–¥–¥

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üì® –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞: [–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞] ([chatId])
```

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

1. **Bot API (webhook/polling):**
   - –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç `channel_post` –Ω–∞–ø—Ä—è–º—É—é –æ—Ç Telegram
   - –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞–Ω–∞–ª–æ–≤, –≥–¥–µ –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `lib/telegram/webhook-handlers.ts`

2. **Client API (Worker):**
   - –ê–∫–∫–∞—É–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–Ω–∞–ª—ã —á–µ—Ä–µ–∑ Client API
   - –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç—É —á–µ—Ä–µ–∑ webhook
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `worker/src/monitor.ts`

### –ü–æ—á–µ–º—É —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

–ï—Å–ª–∏ –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ ("–¢–µ—Å—Ç –ö–∏–¥–¥"), –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç `channel_post` —Ç–æ–ª—å–∫–æ –æ—Ç –Ω–µ–≥–æ. –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –Ω—É–∂–µ–Ω Worker, –Ω–æ –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –∫–∞–Ω–∞–ª–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω –∞–∫–∫–∞—É–Ω—Ç.

