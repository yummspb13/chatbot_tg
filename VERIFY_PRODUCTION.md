# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `npm run check:production:env` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **–ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª**, –∞ –Ω–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel –∏ Render.com!

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏, –Ω–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Dashboard - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –°–∫—Ä–∏–ø—Ç —Å–ª—É–∂–∏—Ç –∫–∞–∫ **—á–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏**.

## ‚úÖ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Vercel

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://vercel.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. Settings ‚Üí Environment Variables
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- [ ] `AI_PROVIDER` = `openai` ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û: –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "mock"!**
- [ ] `OPENAI_API_KEY` = `sk-...` (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-")
- [ ] `TELEGRAM_BOT_TOKEN` = `...` (–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å ":")
- [ ] `TELEGRAM_ADMIN_CHAT_ID` = `120352240`
- [ ] `TELEGRAM_PUBLISH_GROUP_ID` = `-4993347411`
- [ ] `DATABASE_URL` = `postgresql://...` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å PostgreSQL)
- [ ] `JWT_SECRET` = `...` (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- [ ] `ADMIN_PASSWORD_HASH` = `$2a$10$...` –∏–ª–∏ `$2b$10$...`
- [ ] `BOT_API_KEY` = `...` (–¥–ª—è —Å–≤—è–∑–∏ —Å Worker)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Render.com (Worker)

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.render.com
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Web Service (Worker)
3. Environment
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- [ ] `MAIN_APP_URL` = `https://chatbot-tg.vercel.app` ‚ö†Ô∏è **–ë–µ–∑ `/api/tg/webhook` –≤ –∫–æ–Ω—Ü–µ!**
- [ ] `BOT_API_KEY` = `...` (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Vercel)
- [ ] `TELEGRAM_API_ID` = `32425884`
- [ ] `TELEGRAM_API_HASH` = `...`
- [ ] `TELEGRAM_SESSION_STRING` = `...` (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
- [ ] `BOT_WEBHOOK_URL` = `https://chatbot-tg.vercel.app` (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MAIN_APP_URL)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API/Endpoint

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook endpoint

```bash
curl https://chatbot-tg.vercel.app/api/tg/webhook
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "environment": "production",
  "aiProvider": "openai",
  "aiProviderStatus": "openai",
  "timestamp": "..."
}
```

‚ö†Ô∏è –ï—Å–ª–∏ `aiProvider` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `"mock"` - –∑–Ω–∞—á–∏—Ç `AI_PROVIDER` –≤ Vercel —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ `mock`!

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook —á–µ—Ä–µ–∑ Telegram API

```bash
npm run webhook:check
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: https://chatbot-tg.vercel.app/api/tg/webhook
‚úÖ Webhook —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ Vercel - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```

## üìä –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –≤—ã–≤–æ–¥ —Å–∫—Ä–∏–ø—Ç–∞

### –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏, –Ω–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Dashboard:

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª, –∞ –Ω–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω.

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ Vercel Dashboard, —á—Ç–æ `AI_PROVIDER=openai`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ Render.com Dashboard, —á—Ç–æ `MAIN_APP_URL=https://chatbot-tg.vercel.app`
3. –ï—Å–ª–∏ –≤—Å–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ Dashboard - –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞

### –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

–û–±–Ω–æ–≤–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–∑ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

```env
# –î–ª—è Vercel
AI_PROVIDER=openai
OPENAI_API_KEY=sk-...
TELEGRAM_BOT_TOKEN=...
# ... –∏ —Ç.–¥.

# –î–ª—è Worker
MAIN_APP_URL=https://chatbot-tg.vercel.app
BOT_API_KEY=...
# ... –∏ —Ç.–¥.
```

‚ö†Ô∏è **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ git!** –û–Ω —É–∂–µ –≤ `.gitignore`.

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Dashboard:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook endpoint:**
   ```bash
   curl https://chatbot-tg.vercel.app/api/tg/webhook
   ```
   –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å `"aiProvider": "openai"`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook:**
   ```bash
   npm run webhook:check
   ```
   –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Worker - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å–ø–µ—à–Ω–æ–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `AI Provider: OPENAI`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—É - –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–π—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∞

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `AI_PROVIDER=MOCK`, –Ω–æ –≤ Vercel —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `openai`

**–ü—Ä–∏—á–∏–Ω–∞:** –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª

**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ Vercel Dashboard
- –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª: `AI_PROVIDER=openai`

### –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `MAIN_APP_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`, –Ω–æ –≤ Render.com —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–ü—Ä–∏—á–∏–Ω–∞:** –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ Render.com Dashboard
- –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª: `MAIN_APP_URL=https://chatbot-tg.vercel.app`

### Webhook endpoint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `"aiProvider": "mock"`

**–ü—Ä–∏—á–∏–Ω–∞:** `AI_PROVIDER` –≤ Vercel —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ `mock`

**–†–µ—à–µ–Ω–∏–µ:**
1. Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables
2. –ù–∞–π–¥–∏—Ç–µ `AI_PROVIDER`
3. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ `openai`
4. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç (Redeploy)

