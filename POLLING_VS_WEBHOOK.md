# Polling vs Webhook

## ‚úÖ –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

**Polling —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç!** –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –ª–æ–∫–∞–ª—å–Ω–æ.

## üìã –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Polling –∏ Webhook:

### Polling (—Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º):
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Vercel
- ‚ùå –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∑–∞–ø—É—â–µ–Ω —Å–∫—Ä–∏–ø—Ç
- ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### Webhook (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ (24/7)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ Telegram —Å–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è Deployment Protection –≤ Vercel

---

## üß™ –¢–µ–∫—É—â–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ polling —Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
npm run bot:polling
```

**–ß—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
1. ‚úÖ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (`/start`, `/status`, `/listchannels`)
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤ (`/addcity –ú–æ—Å–∫–≤–∞`)
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ (`/addchannel moskva @–∫–∞–Ω–∞–ª "–ù–∞–∑–≤–∞–Ω–∏–µ"`)
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∫–∞–Ω–∞–ª–æ–≤
5. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
6. ‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

---

## üöÄ –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook:

### –®–∞–≥ 1: –û—Ç–∫–ª—é—á–∏—Ç–µ Deployment Protection –≤ Vercel

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://vercel.com/dashboard
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `chatbot-irhw19y8p-pixelprint`
3. Settings ‚Üí **Deployment Protection**
4. –û—Ç–∫–ª—é—á–∏—Ç–µ –¥–ª—è `/api/tg/webhook` –∏–ª–∏ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook

```bash
npm run webhook:set:prod https://chatbot-irhw19y8p-pixelprint.vercel.app
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ

```bash
npm run webhook:info
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ Pending updates: 0
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫

### –®–∞–≥ 4: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ polling

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ polling (Ctrl+C) - –±–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ webhook.

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

1. **–°–µ–π—á–∞—Å:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ polling –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
3. **–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:** –ë–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å 24/7 —á–µ—Ä–µ–∑ webhook

---

## ‚úÖ –ò—Ç–æ–≥–æ:

- ‚úÖ Polling —Ä–∞–±–æ—Ç–∞–µ—Ç - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚ö†Ô∏è –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω—É–∂–µ–Ω webhook
- üìã –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ webhook

