# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ Client API

## –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `worker/.env` (–∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–Ω–µ–≤–æ–π `.env`):

```env
# Telegram Client API
TELEGRAM_API_ID=32425884
TELEGRAM_API_HASH=ecdaac5d16a48465d993985dbda6399c
TELEGRAM_SESSION_STRING=... (–ø–æ–ª—É—á–µ–Ω —á–µ—Ä–µ–∑ QR-–ª–æ–≥–∏–Ω)

# –°–≤—è–∑—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
MAIN_APP_URL=http://localhost:3000
BOT_WEBHOOK_URL=http://localhost:3000
BOT_API_KEY=17d38eb4c014c524e52675ab75661f0dcc8768cbc749a62e7309fabe6c9905cd

# –ü–æ—Ä—Ç worker
WORKER_PORT=3001
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Vercel –ª–æ–∫–∞–ª—å–Ω–æ)

–í –ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3000`

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ worker

–í–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
cd worker
npm install
npm run dev
```

Worker –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3001`

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ worker

```bash
curl http://localhost:3001/runner/status
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "isRunning": false,
  "monitoring": {
    "isMonitoring": false,
    "isConnected": false
  }
}
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
curl -X POST http://localhost:3001/runner/start
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "success": true,
  "message": "–í–æ—Ä–∫–µ—Ä –∑–∞–ø—É—â–µ–Ω",
  "isRunning": true,
  "monitoring": true
}
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ worker

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ worker –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
```
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ Telegram —á–µ—Ä–µ–∑ Client API
üîç –ü–æ–ª—É—á–∞—é –∫–∞–Ω–∞–ª—ã –∏–∑ http://localhost:3000/api/channels...
‚úÖ –ü–æ–ª—É—á–µ–Ω–æ X –∫–∞–Ω–∞–ª–æ–≤ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
üì° –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ X –∫–∞–Ω–∞–ª–æ–≤...
‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤ –∑–∞–ø—É—â–µ–Ω
```

### –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–Ω–∞–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/listchannels`
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–Ω–∞–ª

2. **–û–ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–Ω–∞–ª –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞ (–∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É)
   - –û–ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Å–æ–±—ã—Ç–∏–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä:
     ```
     üéâ –ö–æ–Ω—Ü–µ—Ä—Ç –≤ –ú–æ—Å–∫–≤–µ
     
     –î–∞—Ç–∞: 20 –Ω–æ—è–±—Ä—è, 19:00
     –ú–µ—Å—Ç–æ: –ö—Ä–æ–∫—É—Å –°–∏—Ç–∏ –•–æ–ª–ª
     ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ worker:**
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `üì® –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ ...`
   - –ó–∞—Ç–µ–º: `‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –±–æ—Ç—É —á–µ—Ä–µ–∑ webhook`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `üì® [HANDLER] –ü–æ–ª—É—á–µ–Ω–æ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞!`
   - –ó–∞—Ç–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

## –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Render.com (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Render.com

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Web Service –Ω–∞ Render.com –¥–æ–±–∞–≤—å—Ç–µ:

```env
TELEGRAM_API_ID=32425884
TELEGRAM_API_HASH=ecdaac5d16a48465d993985dbda6399c
TELEGRAM_SESSION_STRING=... (–ø–æ–ª—É—á–µ–Ω —á–µ—Ä–µ–∑ QR-–ª–æ–≥–∏–Ω)

MAIN_APP_URL=https://–≤–∞—à-vercel-url.vercel.app
BOT_WEBHOOK_URL=https://–≤–∞—à-vercel-url.vercel.app
BOT_API_KEY=17d38eb4c014c524e52675ab75661f0dcc8768cbc749a62e7309fabe6c9905cd
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
curl https://–≤–∞—à-worker-url.onrender.com/runner/status
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
curl -X POST https://–≤–∞—à-worker-url.onrender.com/runner/start
```

### –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

–í Render.com Dashboard ‚Üí Logs —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ worker'–∞.

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–Ω–∞–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ `/addchannel` –≤ –±–æ—Ç–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `MAIN_APP_URL` –∏ `BOT_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API:
   ```bash
   curl -H "Authorization: Bearer $BOT_API_KEY" http://localhost:3000/api/channels
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: "BOT_WEBHOOK_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `BOT_WEBHOOK_URL` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è worker'–∞
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: `BOT_WEBHOOK_URL=http://localhost:3000`
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞: `BOT_WEBHOOK_URL=https://–≤–∞—à-vercel-url.vercel.app`

### –ü—Ä–æ–±–ª–µ–º–∞: "TELEGRAM_SESSION_STRING –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ QR-–∫–æ–¥ (—Å–º. `HOW_TO_GET_SESSION_STRING.md`)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `TELEGRAM_SESSION_STRING`
3. –î–æ–±–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è worker'–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–æ—Ç–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ worker'–∞ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ?
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –ø–æ–ª—É—á–∞–µ—Ç –ª–∏ –±–æ—Ç webhook?
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–Ω–∞–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –∏ –∞–∫—Ç–∏–≤–µ–Ω
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (`/status` –≤ Telegram)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ß–µ–∫-–ª–∏—Å—Ç:

- [ ] Worker –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Telegram
- [ ] –ö–∞–Ω–∞–ª—ã –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω (`GET /runner/status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `isMonitoring: true`)
- [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ª–æ–≥–∞—Ö worker'–∞
- [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–æ—Ç—É (–ª–æ–≥–∏ worker'–∞)
- [ ] –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ (–ª–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [ ] –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω—É –Ω–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ

