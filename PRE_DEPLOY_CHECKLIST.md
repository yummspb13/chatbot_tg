# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ Vercel

## üîê 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

–û—Ç–∫—Ä–æ–π—Ç–µ Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- ‚úÖ `TELEGRAM_BOT_TOKEN` = `8308554753:AAGs1rgn2EBwgLtZJYV0a7M8KKhndIOvKro`
- ‚úÖ `TELEGRAM_ADMIN_CHAT_ID` = `120352240`
- ‚úÖ `TELEGRAM_PUBLISH_GROUP_ID` = `-4993347411`
- ‚úÖ `DATABASE_URL` = `postgresql://...` (–≤–∞—à–∞ —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- ‚úÖ `AI_PROVIDER` = `openai` ‚ö†Ô∏è **–í–ê–ñ–ù–û: openai –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞!**
- ‚úÖ `OPENAI_API_KEY` = `sk-...` (–≤–∞—à –∫–ª—é—á OpenAI)
- ‚úÖ `ADMIN_PASSWORD_HASH` = `$2a$10$...` (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å: `npm run admin:password-hash`)
- ‚úÖ `JWT_SECRET` = `...` (—Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
- `OPENAI_MODEL` = `gpt-4o-mini` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `BOT_API_KEY` = `...` (–¥–ª—è API –º–µ–∂–¥—É worker –∏ –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º)
- `WORKER_API_KEY` = `...`
- `Afisha_API_URL` = `https://kiddeo.vercel.app`
- `Afisha_API_KEY` = `...`

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫:** —Å–º. `VERCEL_ENV_SETUP.md`

## üì¶ 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤

- ‚úÖ `package.json` - —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ `prisma/schema.prisma` - provider = "postgresql"
- ‚úÖ `.vercelignore` - worker –∏—Å–∫–ª—é—á–µ–Ω
- ‚úÖ `next.config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è

## üöÄ 3. –î–µ–ø–ª–æ–π

```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Prepare for production deployment with OpenAI"
git push

# 2. –î–µ–ø–ª–æ–π –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Vercel
# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Vercel Dashboard ‚Üí Deployments ‚Üí Deploy
```

## üîß 4. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook:
```bash
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è URL –æ—Ç Vercel (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://your-app.vercel.app)
npm run webhook:set:prod https://your-app.vercel.app
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook:
```bash
npm run webhook:check
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- `url`: `https://your-app.vercel.app/api/tg/webhook`
- `allowed_updates`: –≤–∫–ª—é—á–∞–µ—Ç `callback_query`

## üß™ 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª** ‚Üí –¥–æ–ª–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å—Å—è —á–µ—Ä–Ω–æ–≤–∏–∫
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—É** ‚Üí –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–π—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è
3. **–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–Ω—è—Ç—å"** ‚Üí –¥–æ–ª–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ê—Ñ–∏—à—É
4. **–ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫–∞–∑–∞—Ç—å"** ‚Üí —á–µ—Ä–Ω–æ–≤–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel** ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `ü§ñ AI Provider: OPENAI`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **AI_PROVIDER**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `openai` –≤ Vercel (–Ω–µ `mock`!)
2. **OPENAI_API_KEY**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º –∏ –∏–º–µ—Ç—å –±–∞–ª–∞–Ω—Å
3. **Webhook**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã (–ø—Ä–µ—Ñ–∏–∫—Å `afisha_bot_`)

## üìù –õ–æ–≥–∏

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ Vercel:
- Dashboard ‚Üí Functions ‚Üí Logs
- –ò–ª–∏ —á–µ—Ä–µ–∑ CLI: `vercel logs`

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!

